{% extends "layout.html" %}
{% block head %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='mathlive/mathlive.core.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='mathlive/mathlive.css') }}">
<style>
  .mathfield {
            border: 1px solid #ddd;
            padding:5px;
            margin: 10px 10px 10px 0;
            border-radius:5px;
            width: 80%;
            margin-left: 15%;
            background-color: #fff;
        }
</style>
{% endblock head %}

{% block content %}
<!--
<div class="formBox">
  <div class="form">
    <form method="POST" action="">
      {{ form.csrf_token }}
      <h2>Add a Problem</h2>
      <div class="form-group">
        {{ form.question.label(id="mathfield") }}
        {{ form.question(id='flaskFormQuestion') }}
      </div>
      <div class="form-group">
        {{ form.answer.label() }}
        {{ form.answer() }}
      </div>
      <div class="form-group">
        {{ form.topic.label() }}
        {{ form.topic() }}
      </div>
      <div class="form-group">
        {{ form.submit(class="btn", value="Submit") }}
      </div>

    </form>
    <div id="mathfield">Add Problem: </div>
  </div>
</div>
-->
<div class="formBox" id="problemForm">
  <form method="POST" action="">
    <div class="form-group">
      <label for='problemthing'>Problem</label>
      <input type='text' name='problem' id='problem'>
      <div class="mathfield" id='mf' name='thing' >f(x)= </div>
    </div>
    <!--
    <div class="form-group">
      <label>Answer</label>
      <div class="mathfield" id='mf' >f(x)= </div>
    </div>
    -->
    <input type="submit" value="Submit">
  </form>
</div>
<div id='output'></div>

<!--
<div class="formBox" style="margin-top: 20px; height: 100px;">
  <div id="problemInput">

  </div>
  <div id="answerInput">
    <p>Answer</p>
    <div class="mathfield" id='mf' >f(x)= </div>
  </div>
  <div id="topicInput">
    <p>Topic</p>
  </div>

   <input type="submit">
</div>
-->

<script src="../../static/mathlive/mathlive.js"></script>
<script type="module">
          import MathLive from 'https://unpkg.com/mathlive/dist/mathlive.mjs';
          MathLive.renderMathInDocument();
          MathLive.makeMathField('mathfield');
</script>
<script>
    const mf = MathLive.makeMathField('mf', {
        onContentDidChange: mf => {
            document.getElementById('output').innerHTML = mf.$text();
            //document.getElementById('problem').innerHTML = mf.$text();
            form = document.getElementById('problemForm').innerHTML
            form.problem.value = mf.$text();
            //document.getElementById('flaskFormQuestion').innerHTML = mf.$text();
        }
    });
</script>

{% endblock content %}
