{% extends "layout.html" %}
{% block head %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='mathlive/mathlive.core.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='mathlive/mathlive.css') }}">
<script type=text/javascript src="{{ url_for('static', filename='jquery.js') }}"></script>
<script type=text/javascript> $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};</script>
<style>
  .mathfield {
            border: 1px solid #ddd;
            padding:5px;
            margin: 10px 10px 10px 0;
            border-radius:5px;
            width: 80%;
            margin-left: 15%;
            background-color: #fff;
        }
</style>
{% endblock head %}

{% block content %}
<script type=text/javascript>
  var enteredAnswer = "";
  var enteredProblem = "";
  var enteredCategory = "";

  $(function() {
    $('button#btn_submit').bind('click', function() {
      console.log("activated")
      $.getJSON($SCRIPT_ROOT + '/post/_get_problem_input', {
        problem: problemInput,
        answer: answerInput
      }, function(data) {
        $("#result").text(data.result);
      });
      return false;
    });
  });
</script>

<div class="formBox" id="problemForm">
  <form method="POST" action="/post/new">
    <label for="problemInputBox">Problem: </label>
    <div name="problemInputBox" id="problemInputBox" class="mathfield"></div>
    <label for="answerInputBox">Answer: </label>
    <div name="answerInputBox" id="answerInputBox" class="mathfield"></div>
    <button id='btn_submit' type="submit" name="button">Submit</button>
  </form>
</div>
<p id="result"></p>



<script src="../../static/mathlive/mathlive.js"></script>
<script type="module">
  import MathLive from 'https://unpkg.com/mathlive/dist/mathlive.mjs';
  MathLive.renderMathInDocument();
  MathLive.makeMathField('mathfield');
</script>
<script>
  const problem = MathLive.makeMathField('problemInputBox', {
      onContentDidChange: problemInputBox => {
          problemInput = problem.$text();
      }
  });
  const answer = MathLive.makeMathField('answerInputBox', {
      onContentDidChange: answerInputBox => {
          answerInput = answer.$text();
      }
  });
</script>

{% endblock content %}
